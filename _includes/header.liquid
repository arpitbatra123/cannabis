<script>
    const onLangChange = (toLang, pageUrl) => {
        
        if (pageUrl.includes("en"))
            pageUrl = pageUrl.split("en").slice(1)

        if (toLang === "en") {
            window.location.href = new URL(window.location.protocol + "//" + window.location.host + "/en" + pageUrl);
        }
        else {
            window.location.href = new URL(window.location.protocol + "//" + window.location.host + pageUrl);
        }
    }
</script>
<header class="page-header">
    <div class="container">
        <a href="javascript:toggleSidebar()" class="icon-btn" title="Menu" id="menu_btn"><svg class="icon">
                <use href="/assets/bars.svg#content" />
            </svg></a>
        <img width="48" height="48" class="logo" src="/assets/logo.svg" alt="">
        <nav>
            {% include 'menu' %}
        </nav>
        <a id="theme_switch" class="icon-btn" href="javascript:toggleTheme()" title="Change theme"><svg class="icon">
                <use href="/assets/moon.svg#content" />
            </svg></a>
        <div id="lang_cont">
            <a href="javascript:;" id="lang_switch" title="Change language">
                {% if locale == "en" %}
                <img src="/assets/gb.svg" alt="English" class="flag-img flag-img-english" />
                {% else %}
                <img src="/assets/it.svg" alt="Italian" class="flag-img flag-img-italy" />
                {% endif %}
            </a>
            <ul>
                {% if locale == "en" %}
                <li>
                    <a href="javascript:"><img src="/assets/gb.svg" alt="English" class="flag-img flag-img-english">English</a>
                </li>
                <li>
                    <a href="javascript:onLangChange('it', '{{page.url}}');"><img src="/assets/it.svg"
                            class="flag-img flag-img-italy" alt="Italian">Italian</a>
                </li>
                {% else %}
                <li>
                    <a href="javascript:onLangChange('en', '{{page.url}}');"><img src="/assets/gb.svg" alt="English"
                            class="flag-img flag-img-english">English</a>
                </li>
                <li>
                    <a href="javascript:"><img src="/assets/it.svg" alt="Italian" class="flag-img flag-img-italy">Italian</a>
                </li>
                {% endif %}
            </ul>
        </div>
    </div>
</header>